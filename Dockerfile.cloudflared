FROM alpine:latest

# CÃ i Ä‘áº·t curl Ä‘á»ƒ download cloudflared
RUN apk add --no-cache curl

# Download vÃ  cÃ i Ä‘áº·t cloudflared
RUN curl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -o /usr/local/bin/cloudflared && \
    chmod +x /usr/local/bin/cloudflared

# Táº¡o entrypoint script Ä‘Æ¡n giáº£n
RUN echo '#!/bin/sh' > /entrypoint.sh && \
    echo 'set -e' >> /entrypoint.sh && \
    echo 'echo "ðŸš€ Starting Cloudflare tunnel..."' >> /entrypoint.sh && \
    echo 'echo "ðŸ’¡ Sá»­ dá»¥ng tunnel token Ä‘á»ƒ káº¿t ná»‘i"' >> /entrypoint.sh && \
    echo 'exec cloudflared tunnel run --token $CLOUDFLARE_TUNNEL_TOKEN' >> /entrypoint.sh && \
    chmod +x /entrypoint.sh

ENTRYPOINT ["/entrypoint.sh"]
